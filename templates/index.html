{% extends "base.html" %}
{% block content %}

<div class="page-header">
    <h1>Your Tasks</h1>
</div>

<div class="card">
    <form action="{{ url_for('add_task') }}" method="POST">
        <input type="text" name="title" placeholder="Task title" required>
        <input type="text" name="note" placeholder="Note / due date (optional)">
        <button class="btn" type="submit">Add Task</button>
    </form>
</div>

<div class="page-header">
    <h2>Current Tasks</h2>
</div>

{% if tasks %}
    <div class="task-list">
        {% for task in tasks %}
            <div class="task-card {% if task.done %}task-done{% endif %}">
                <div class="task-info">
                    <p class="task-title">{{ loop.revindex }}. {{ task.title }}</p>
                    {% if task.note %}
                        <p class="task-note">{{ task.note }}</p>
                    {% endif %}
                    {% if task.done %}
                        <p class="task-status">âœ” Completed</p>
                    {% endif %}
                </div>

                {% if not task.done %}
                    <form action="{{ url_for('mark_done', task_id=task.id) }}" method="POST">
                        <button class="btn-small">Mark done</button>
                    </form>
                {% endif %}
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>No tasks yet. Add one above!</p>
{% endif %}

<div class="page-header">
    <h2>Discord</h2>
</div>

<form action="{{ url_for('send_now') }}" method="POST">
    <button class="btn btn-discord">Send my pending tasks to Discord</button>
</form>

{% endblock %}
